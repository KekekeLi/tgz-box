# TGZ-BOX

ä¸€ä¸ªä¸“ä¸ºå†…ç½‘å¼€å‘ç¯å¢ƒè®¾è®¡çš„npmä¾èµ–ä¸‹è½½å·¥å…·ï¼Œç¡®ä¿ä¾èµ–æ ‘å®Œæ•´ã€ç‰ˆæœ¬æ­£ç¡®ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ§¹ **è‡ªåŠ¨æ¸…ç†npmç¼“å­˜** - é¿å…ç¼“å­˜å¯¼è‡´çš„ç‰ˆæœ¬é—®é¢˜
- ğŸ“‹ **æ™ºèƒ½æ–‡ä»¶ä¼˜å…ˆçº§** - package-lock.json > package.json
- ğŸ“¦ **å¤šç§ä¸‹è½½æ¨¡å¼** - æ”¯æŒé”å®šæ–‡ä»¶ã€åŒ…æ–‡ä»¶ã€æŒ‡å®šåŒ…å
- ğŸ“Š **å®Œæ•´ä¾èµ–ç»Ÿè®¡** - ä¸‹è½½å‰ç»Ÿè®¡æ‰€æœ‰ä¾èµ–æ•°é‡ï¼ˆåŒ…å«é—´æ¥ä¾èµ–ï¼‰
- ğŸ¨ **è¿›åº¦æ˜¾ç¤º** - å®æ—¶æ˜¾ç¤ºè§£æå’Œä¸‹è½½è¿›åº¦ã€æˆåŠŸ/å¤±è´¥æ•°é‡ã€è€—æ—¶ç­‰
- ğŸš€ **å¹¶å‘ä¸‹è½½** - æ”¯æŒå¤šçº¿ç¨‹å¹¶å‘ä¸‹è½½ï¼Œæé«˜æ•ˆç‡
- â™»ï¸ **è‡ªåŠ¨é‡è¯•æœºåˆ¶** - ä¸‹è½½è¿‡ç¨‹ä¸­å¤±è´¥çš„åŒ…ä¼šè‡ªåŠ¨é‡è¯•ï¼Œæå‡æˆåŠŸç‡
- ğŸ”„ **è‡ªåŠ¨åŒ–æµç¨‹** - è§£æã€ä¸‹è½½ã€æ£€æŸ¥ã€ä¿®å¤
- ğŸ” **TGZæ–‡ä»¶æ£€æŸ¥** - æ£€æŸ¥packagesç›®å½•ä¸­çš„åŒ…å®Œæ•´æ€§
- ğŸ”§ **è‡ªåŠ¨ä¿®å¤** - è‡ªåŠ¨ä¿®å¤package.jsonä¸­çš„ç‰ˆæœ¬ä¸åŒ¹é…é—®é¢˜

## å®‰è£…

### å…¨å±€å®‰è£…
```bash
npm install tgz-box -g
```

### æœ¬åœ°å®‰è£…
```bash
npm install tgz-box --save-dev
```

## ä½¿ç”¨æ–¹æ³•

### 1. ä¸‹è½½ä¾èµ–åŒ… (install)

#### åŸºæœ¬ç”¨æ³•
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è½½æ‰€æœ‰ä¾èµ–
tgz-box install
# æˆ–ä½¿ç”¨ç®€å†™
tgz i
```

#### æŒ‡å®šåŒ…åä¸‹è½½
```bash
# ä¸‹è½½æŒ‡å®šåŒ…åŠå…¶ä¾èµ–
tgz-box install vue@3.4.1
tgz-box install lodash
```

#### å‘½ä»¤é€‰é¡¹
```bash
# å¼ºåˆ¶ä½¿ç”¨package.jsonï¼ˆå¿½ç•¥package-lock.jsonï¼‰
tgz-box install -p
tgz-box install --package-json

# ä¸‹è½½å‰æ¸…ç†npmç¼“å­˜
tgz-box install -c
tgz-box install --clear-cache

# å¼ºåˆ¶ä½¿ç”¨package.jsonæ¨¡å¼
tgz-box install --force-package

# ç»„åˆä½¿ç”¨
tgz-box install vue -p -c
```

### 2. æ£€æŸ¥TGZæ–‡ä»¶ (check)

#### æ£€æŸ¥packagesç›®å½•
```bash
# æ£€æŸ¥å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰åŒ…
tgz-box check
# æˆ–ä½¿ç”¨ç®€å†™
tgz c

# æ£€æŸ¥æŒ‡å®šç›®å½•
tgz-box check -d /path/to/packages
tgz-box check --directory /path/to/packages
```

#### æ£€æŸ¥å•ä¸ªåŒ…
```bash
# æ£€æŸ¥æŒ‡å®šåŒ…
tgz-box check -p vue
tgz-box check --package vue
```

#### è‡ªåŠ¨ä¿®å¤ç‰ˆæœ¬ä¸åŒ¹é…
```bash
# æ£€æŸ¥å¹¶è‡ªåŠ¨ä¿®å¤
tgz-box check -f
tgz-box check --fix

# ä¿®å¤æŒ‡å®šåŒ…
tgz-box check -p vue -f
```

### 3. æ¸…ç†ç¼“å­˜ (clear-cache)
```bash
# æ¸…ç†npmç¼“å­˜
tgz-box clear-cache
```

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šå†…ç½‘å¼€å‘ç¯å¢ƒéƒ¨ç½²
```bash
# 1. åœ¨æœ‰ç½‘ç»œçš„ç¯å¢ƒä¸‹è½½ä¾èµ–
cd your-project
tgz-box install

# 2. å°†ä¸‹è½½çš„packagesç›®å½•å¤åˆ¶åˆ°å†…ç½‘ç¯å¢ƒ
# 3. åœ¨å†…ç½‘ç¯å¢ƒä¸­ä½¿ç”¨æœ¬åœ°registryå®‰è£…
npm install --registry file://./packages
```

### åœºæ™¯2ï¼šCI/CDæµæ°´çº¿ä¼˜åŒ–
```bash
# åœ¨æ„å»ºé˜¶æ®µé¢„ä¸‹è½½ä¾èµ–
tgz-box install
# åç»­æ­¥éª¤å¯ä»¥ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ï¼Œæé«˜æ„å»ºé€Ÿåº¦
```

### åœºæ™¯3ï¼špackagesç›®å½•ç»´æŠ¤
```bash
# æ£€æŸ¥packagesç›®å½•ä¸­çš„åŒ…å®Œæ•´æ€§
tgz-box check -d /path/to/packages

# è‡ªåŠ¨ä¿®å¤ç‰ˆæœ¬ä¸åŒ¹é…çš„åŒ…
tgz-box check -d /path/to/packages --fix
```

## è¾“å‡ºç»“æœ

### ä¸‹è½½è¿‡ç¨‹è¾“å‡º
```
TGZ-BOX ä¾èµ–ä¸‹è½½å·¥å…·
ç¡®ä¿ä¾èµ–æ ‘å®Œæ•´ï¼Œç‰ˆæœ¬æ­£ç¡®

ä½¿ç”¨ package.json
ä¾èµ–è§£æå®Œæˆï¼Œå…±æ‰¾åˆ° 301 ä¸ªåŒ…ï¼ˆåŒ…å«æ‰€æœ‰é—´æ¥ä¾èµ–ï¼‰
å¼€å§‹ä¸‹è½½ 301 ä¸ªä¾èµ–åŒ…...

ä¸‹è½½è¿›åº¦: 132/301 (43.9%) | æˆåŠŸ: 132 | å¤±è´¥: 0 | è€—æ—¶: 14.4s | å½“å‰: esbuild-linux-s390x-0.15.18.tgz

ä¸‹è½½å®Œæˆï¼
æ€»è®¡: 301 ä¸ªåŒ…
æˆåŠŸ: 301 ä¸ª
å¤±è´¥: 0 ä¸ª
æ€»è€—æ—¶: 28.6s
æ–‡ä»¶ä¿å­˜åœ¨: ./packages
```

### æ£€æŸ¥ç»“æœè¾“å‡º
```
TGZæ–‡ä»¶æ£€æŸ¥å·¥å…·
ç”¨äºæ£€æŸ¥packagesç›®å½•ä¸­çš„npmåŒ…å®Œæ•´æ€§

æ£€æŸ¥ç›®å½•: /path/to/packages
æ‰€æœ‰åŒ…éƒ½å®Œæ•´ä¸”ç‰ˆæœ¬æ­£ç¡®

æ£€æŸ¥ç»“æœæ‘˜è¦:
æ€»ä¾èµ–æ•°: 150

âš ï¸ ç‰ˆæœ¬ä¸åŒ¹é…çš„åŒ… (3ä¸ª)

âœ… å·²ä¿®å¤çš„ä¾èµ– (3ä¸ª)
```

## é…ç½®è¯´æ˜

### ç›®å½•ç»“æ„
```
project/
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â””â”€â”€ packages/              # ä¸‹è½½çš„tgzæ–‡ä»¶ç›®å½•
    â”œâ”€â”€ vue/
    â”‚   â”œâ”€â”€ package.json
    â”‚   â””â”€â”€ vue-3.4.1.tgz
    â””â”€â”€ lodash/
        â”œâ”€â”€ package.json
        â””â”€â”€ lodash-4.17.21.tgz
```

### æ–‡ä»¶ä¼˜å…ˆçº§
1. `package-lock.json` (æœ€é«˜ä¼˜å…ˆçº§)
2. `package.json`
3. ç”¨æˆ·è¾“å…¥çš„åŒ…å

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ä¸‹è½½å¤±è´¥
```bash
# æ¸…ç†ç¼“å­˜åé‡è¯•
tgz-box clear-cache
tgz-box install
```

#### 2. ç½‘ç»œè¶…æ—¶
```bash
# è®¾ç½®npm registry
npm config set registry https://registry.npmmirror.com/
tgz-box install
```

#### 3. æƒé™é—®é¢˜
```bash
# ä½¿ç”¨sudoï¼ˆä»…é™Linux/macOSï¼‰
sudo tgz-box install
```

#### 4. ç‰ˆæœ¬ä¸åŒ¹é…
```bash
# ä½¿ç”¨checkå‘½ä»¤æ£€æŸ¥å¹¶ä¿®å¤
tgz-box check --fix
```

### è°ƒè¯•æ¨¡å¼
```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
DEBUG=tgz-box* tgz-box install
```

## æŠ€æœ¯å®ç°

- **è¯­è¨€**: TypeScript
- **ä¾èµ–è§£æ**: æ”¯æŒnpm v6å’Œv7+æ ¼å¼çš„package-lock.json
- **ä¸‹è½½å¼•æ“**: åŸºäºaxiosçš„å¹¶å‘ä¸‹è½½
- **è¿›åº¦æ˜¾ç¤º**: ä½¿ç”¨oraå’Œchalkç¾åŒ–è¾“å‡º
- **æ–‡ä»¶æ“ä½œ**: åŸºäºfs-extraçš„å¼‚æ­¥æ–‡ä»¶æ“ä½œ
- **å‘½ä»¤è¡Œ**: ä½¿ç”¨commander.jsæ„å»ºCLI

```

## è®¸å¯è¯

MIT License